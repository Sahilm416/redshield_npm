{"version":3,"sources":["../../../src/components/LoginCard.tsx"],"sourcesContent":["\"use client\";\r\nimport { LoginUser } from \"../actions/login\";\r\nimport { Button } from \"./ui/button\";\r\nimport {\r\n  Card,\r\n  CardHeader,\r\n  CardTitle,\r\n  CardFooter,\r\n  CardContent,\r\n} from \"./ui/card\";\r\n\r\nimport { Input } from \"./ui/input\";\r\nimport { Label } from \"./ui/label\";\r\nimport React, { Dispatch, SetStateAction, useState } from \"react\";\r\nimport { Loader2 } from \"lucide-react\";\r\nimport { toast } from \"sonner\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport { sendResetPasswordLink } from \"../actions/forgotPassword\";\r\n\r\nexport default function LoginCard({ project_name, project_id }: { project_name: string, project_id: string }) {\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [forgotPassword, setForgotPassword] = useState<boolean>(false);\r\n\r\n  const router = useRouter();\r\n  const sendData = async (formData: FormData) => {\r\n    const email = formData.get(\"email\") as string;\r\n    const password = formData.get(\"password\") as string;\r\n    await fakeLoad();\r\n    setLoading(true);\r\n    const res = await LoginUser({ email: email, password: password, project_id: project_id });\r\n    if (res.status) {\r\n      formData.set(\"email\",\"\")\r\n      toast.success(res.message);\r\n      router.refresh();\r\n    } else {\r\n      toast.error(res.message);\r\n    }\r\n    setLoading(false);\r\n  };\r\n  return (\r\n    <>\r\n      {forgotPassword ? (\r\n        <ForgotPasswordComponent setForgotPassword={setForgotPassword} />\r\n      ) : (\r\n        <Card className=\" redshield-bg-white redshield-p-2 redshield-shadow-lg redshield-rounded-md redshield-border-[#EBEBEB]\">\r\n          <form action={sendData}>\r\n            <CardHeader>\r\n              <CardTitle>Login to {project_name}</CardTitle>\r\n            </CardHeader>\r\n            <CardContent className=\"redshield-flex redshield-flex-col redshield-gap-3\">\r\n              <Label htmlFor=\"email\">Email</Label>\r\n              <Input\r\n                className=\"redshield-border-[#EBEBEB] redshield-rounded-sm\"\r\n                autoFocus\r\n                placeholder=\"enter email\"\r\n                type=\"email\"\r\n                name=\"email\"\r\n                id=\"email\"\r\n                required\r\n              />\r\n              <Label htmlFor=\"password\">Password</Label>\r\n              <Input\r\n                className=\"redshield-border-[#EBEBEB] redshield-rounded-sm\"\r\n                placeholder=\"enter password\"\r\n                type=\"password\"\r\n                name=\"password\"\r\n                id=\"password\"\r\n                required\r\n              />\r\n            </CardContent>\r\n            <CardFooter className=\"redshield-flex-col redshield-gap-2 redshield-pb-2\">\r\n              <Button\r\n                disabled={loading}\r\n                className=\"redshield-w-full redshield-rounded-sm\"\r\n                type=\"submit\"\r\n              >\r\n                {loading ? (\r\n                  <Loader2 className=\"redshield-animate-[spin_0.4s_linear_infinite] redshield-w-[27px] redshield-h-[27px] redshield-origin-center\" />\r\n                ) : (\r\n                  \"login\"\r\n                )}\r\n              </Button>\r\n              <Button onClick={() => setForgotPassword(true)} variant={\"link\"}>\r\n                forgot password\r\n              </Button>\r\n            </CardFooter>\r\n          </form>\r\n        </Card>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nfunction ForgotPasswordComponent({\r\n  setForgotPassword,\r\n}: {\r\n  setForgotPassword: Dispatch<SetStateAction<boolean>>;\r\n}) {\r\n  const [resetPassLoading, setResetPassLoading] = useState<boolean>(false);\r\n  const resetPassRequest = async (formData: FormData) => {\r\n    const email = formData.get(\"email\") as string;\r\n    //get current url for reset password endpoint\r\n    const url = window.location.toString().split(\"/Auth\")[0] as string;\r\n    await fakeLoad();\r\n    setResetPassLoading(true);\r\n    const res = await sendResetPasswordLink({ email: email, url: url });\r\n    if (res.status) {\r\n      toast.success(res.message);\r\n    } else {\r\n      toast.error(res.message);\r\n    }\r\n    setResetPassLoading(false);\r\n  };\r\n  return (\r\n    <form action={resetPassRequest}>\r\n      <Card className=\"redshield-rounded-md\">\r\n        <CardHeader>\r\n          <CardTitle>Reset Password</CardTitle>\r\n        </CardHeader>\r\n        <CardContent className=\"redshield-flex redshield-flex-col redshield-gap-5\">\r\n          <Label htmlFor=\"forgotPassEmail\">Email</Label>\r\n          <Input\r\n            name=\"email\"\r\n            placeholder=\"enter your email address\"\r\n            required\r\n            autoFocus\r\n            className=\"redshield-rounded-sm\"\r\n            id=\"forgotPassEmail\"\r\n            type=\"email\"\r\n          />\r\n        </CardContent>\r\n        <CardFooter className=\"redshield-gap-3\">\r\n          <Button\r\n            onClick={() => setForgotPassword(false)}\r\n            variant={\"outline\"}\r\n            className=\"redshield-w-full redshield-rounded-sm\"\r\n          >\r\n            Back\r\n          </Button>\r\n          <Button className=\"redshield-rounded-sm redshield-w-full\">\r\n            {resetPassLoading ? (\r\n              <Loader2 className=\"redshield-animate-[spin_0.4s_linear_infinite] redshield-w-[27px] redshield-h-[27px]\" />\r\n            ) : (\r\n              \"Send link\"\r\n            )}\r\n          </Button>\r\n        </CardFooter>\r\n      </Card>\r\n    </form>\r\n  );\r\n}\r\n\r\nconst fakeLoad = async () => {\r\n  return;\r\n};\r\n"],"mappings":"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","names":["React"]}